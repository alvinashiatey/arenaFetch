(function(s,i){typeof exports=="object"&&typeof module<"u"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(s=typeof globalThis<"u"?globalThis:s||self,i(s.arenawebc={}))})(this,function(s){"use strict";class i{contentUrl;data;templates;templateBlocks;constructor(e){this.templates=[],this.contentUrl=e.slug?`https://api.are.na/v2/channels/${e.slug}?sort=position&order=asc&per=100`:"",this.templateBlocks={},this.init().then(()=>{}).catch(t=>{console.log(t.message)})}async init(){this.data=await this.fetchContent(),this.handleTemplate()}async fetchContent(){if(this.contentUrl==="")throw Error("no arena channel slug provided");return await fetch(this.contentUrl).then(e=>e.json())}handleTemplate(){this.parseTemplateBlocks()}parseTemplateBlocks(){this.templates=["image","text"],this.templates.forEach(e=>{let t=e.replace(/[A-Z]/g,"-$&").toLowerCase(),a=e.split(/[A-Z]/g)[0];a=a[0].toUpperCase()+a.slice(1);let l=document.querySelector(`.${t}-blocks`),n=document.getElementById(`${t}-block`);this.templateBlocks[e]={name:a,container:l,template:n?n.content:null}}),this.parseContent()}parseContent(){this.data?.contents?.forEach(e=>{switch(e.class){case"Image":this.renderContent(e,this.templateBlocks.image);break;case"Text":this.renderContent(e,this.templateBlocks.text);break}})}renderContent(e,t){if(!t.template||!t.container)return;let a=t.template.cloneNode(!0),n=Object.assign({},...["title","image","video","link","content","description","descriptionHtml"].map(o=>({[o]:a.querySelector(`.${o.replace(/[A-Z]/g,"-$&").toLowerCase()}`)})));n.title&&(e.title?n.title.innerHTML=e.title:n.title.remove()),n.image&&(e.image?n.image.src=e.image.large.url:n.image.remove()),t.container.append(a)}}s.ArenaWebComponent=i,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
